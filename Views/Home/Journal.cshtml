@using Microsoft.AspNetCore.Identity

    
@inject UserManager<ApplicationUser> UserManager
@{
    ViewData["Title"] = "Journal";
    var u = await @UserManager.GetUserAsync(User);
    var userName = u.UserName;
    if (u.FirstName != null)
    {
        userName = u.FirstName;
    }

}
<div id="app">
    <section v-if="errored">
        <p>We're sorry, we're not able to retrieve this information at the moment, please try back later</p>
    </section>

    <section v-else>
        <div v-if="loading"><vue-typer text='Loading'></vue-typer></div>

        <div v-else>
            <div class="content">
                <template v-for="item in items">
                    <gc-item v-bind:content="item.content" v-bind:author="item.author" :class="item.compstyle"></gc-item>
                </template>

            </div>
            <div v-if="!longresponse && !numresponse">
                <div class="response">
                    <gc-response v-on:eventname="updateparent($event)" author="@userName" v-bind:index="index"></gc-response>
                </div>
            </div>
            <div v-if="longresponse">
                <div class="response-long">
                    <gc-response-long v-on:eventname="updateparent($event)" author="@userName" v-bind:index="index"></gc-response-long>
                </div>
            </div>
            <div v-if="numresponse">
                <div class="response-num">
                    <gc-response-num v-on:eventname="updateparent($event)" author="@userName" v-bind:index="index"></gc-response-num>
                </div>
            </div>
            <div class="submit">
                <button v-on:click="postConversation()">Finish</button>
            </div>
        </div>
        
    </section>
</div>

@section Scripts {
    <script src="~/js/coach.js"></script>
    <link rel="stylesheet" href="~/css/Slider.css" />
}